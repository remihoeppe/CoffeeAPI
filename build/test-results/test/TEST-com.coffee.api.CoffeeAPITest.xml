<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="com.coffee.api.CoffeeAPITest" tests="1" skipped="0" failures="0" errors="0" timestamp="2024-10-29T15:52:08" hostname="MacBook-Pro-3" time="0.237">
  <properties/>
  <testcase name="API returns a list of roasters GET request()" classname="com.coffee.api.CoffeeAPITest" time="0.237"/>
  <system-out><![CDATA[15:52:08.082 [Test worker] DEBUG Exposed -- DROP TABLE IF EXISTS roastercoffee
15:52:08.086 [Test worker] DEBUG Exposed -- DROP TABLE IF EXISTS coffee
15:52:08.088 [Test worker] DEBUG Exposed -- DROP TABLE IF EXISTS roaster
15:52:08.101 [Test worker] DEBUG Exposed -- CREATE TABLE IF NOT EXISTS roaster (id SERIAL PRIMARY KEY, "name" VARCHAR(255) NOT NULL, url VARCHAR(255) NOT NULL, address VARCHAR(255) NOT NULL)
15:52:08.104 [Test worker] DEBUG Exposed -- CREATE TABLE IF NOT EXISTS coffee (id SERIAL PRIMARY KEY, "name" VARCHAR(255) NOT NULL)
15:52:08.109 [Test worker] DEBUG Exposed -- CREATE TABLE IF NOT EXISTS roastercoffee (id SERIAL PRIMARY KEY, roaster_id INT NOT NULL, coffee_id INT NOT NULL, CONSTRAINT fk_roastercoffee_roaster_id__id FOREIGN KEY (roaster_id) REFERENCES roaster(id) ON DELETE RESTRICT ON UPDATE RESTRICT, CONSTRAINT fk_roastercoffee_coffee_id__id FOREIGN KEY (coffee_id) REFERENCES coffee(id) ON DELETE RESTRICT ON UPDATE RESTRICT)
15:52:08.120 [Test worker] DEBUG Exposed -- INSERT INTO roaster ("name", url, address) VALUES ('Monmouth Coffee Company', 'https://www.monmouthcoffee.co.uk/', '123 Street')
15:52:08.124 [Test worker] DEBUG Exposed -- INSERT INTO roaster ("name", url, address) VALUES ('Square Mile Coffee Roasters', 'https://shop.squaremilecoffee.com/', '123 Street')
15:52:08.125 [Test worker] DEBUG Exposed -- INSERT INTO roaster ("name", url, address) VALUES ('Skylark Coffee', 'https://skylark.coffee/', '123 Street')
15:52:08.127 [Test worker] DEBUG Exposed -- INSERT INTO coffee ("name") VALUES ('Good Coffee')
15:52:08.129 [Test worker] DEBUG Exposed -- INSERT INTO roastercoffee (roaster_id, coffee_id) VALUES (1, 1)
15:52:08.130 [Test worker] DEBUG Exposed -- INSERT INTO coffee ("name") VALUES ('Espresso Blend')
15:52:08.131 [Test worker] DEBUG Exposed -- INSERT INTO roastercoffee (roaster_id, coffee_id) VALUES (1, 2)
15:52:08.131 [Test worker] DEBUG Exposed -- INSERT INTO coffee ("name") VALUES ('House Blend')
15:52:08.132 [Test worker] DEBUG Exposed -- INSERT INTO roastercoffee (roaster_id, coffee_id) VALUES (2, 3)
15:52:08.133 [Test worker] DEBUG Exposed -- INSERT INTO coffee ("name") VALUES ('French Roast')
15:52:08.133 [Test worker] DEBUG Exposed -- INSERT INTO roastercoffee (roaster_id, coffee_id) VALUES (2, 4)
15:52:08.134 [Test worker] DEBUG Exposed -- INSERT INTO coffee ("name") VALUES ('Organic Dark Roast')
15:52:08.135 [Test worker] DEBUG Exposed -- INSERT INTO roastercoffee (roaster_id, coffee_id) VALUES (3, 5)
15:52:08.135 [Test worker] DEBUG Exposed -- INSERT INTO coffee ("name") VALUES ('Ethiopian Light Roast')
15:52:08.136 [Test worker] DEBUG Exposed -- INSERT INTO roastercoffee (roaster_id, coffee_id) VALUES (3, 6)
Database prepared successfully
***** REQUEST: GET: /roasters *****
GET /roasters HTTP/1.1



15:52:08.217 [Test worker] DEBUG Exposed -- SELECT roaster.id, roaster."name", roaster.url, roaster.address FROM roaster
15:52:08.233 [Test worker] DEBUG Exposed -- SELECT coffee.id, coffee."name", roastercoffee.id, roastercoffee.coffee_id, roastercoffee.roaster_id FROM coffee INNER JOIN roastercoffee ON coffee.id = roastercoffee.coffee_id WHERE roastercoffee.roaster_id = 1
15:52:08.237 [Test worker] DEBUG Exposed -- SELECT coffee.id, coffee."name", roastercoffee.id, roastercoffee.coffee_id, roastercoffee.roaster_id FROM coffee INNER JOIN roastercoffee ON coffee.id = roastercoffee.coffee_id WHERE roastercoffee.roaster_id = 2
15:52:08.239 [Test worker] DEBUG Exposed -- SELECT coffee.id, coffee."name", roastercoffee.id, roastercoffee.coffee_id, roastercoffee.roaster_id FROM coffee INNER JOIN roastercoffee ON coffee.id = roastercoffee.coffee_id WHERE roastercoffee.roaster_id = 3
***** RESPONSE 200 to GET: /roasters *****
HTTP/1.1 200 OK
content-type: application/json; charset=utf-8

[{"name":"Monmouth Coffee Company","url":"https://www.monmouthcoffee.co.uk/","address":"123 Street","coffees":[{"name":"Good Coffee"},{"name":"Espresso Blend"}]},{"name":"Square Mile Coffee Roasters","url":"https://shop.squaremilecoffee.com/","address":"123 Street","coffees":[{"name":"House Blend"},{"name":"French Roast"}]},{"name":"Skylark Coffee","url":"https://skylark.coffee/","address":"123 Street","coffees":[{"name":"Organic Dark Roast"},{"name":"Ethiopian Light Roast"}]}]
]]></system-out>
  <system-err><![CDATA[]]></system-err>
</testsuite>
